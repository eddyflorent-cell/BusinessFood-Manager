<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BusinessFood Manager</title>

    <!-- CSS principal -->
    <link rel="stylesheet" href="style.css?v=3">

    <!-- Librairies pour export PDF / capture -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>

<!-- ======================= NAVBAR ======================= -->
<nav class="navbar">
    <div class="app-title">BusinessFood Manager</div>
    <div class="nav-links">
        <button id="tab-home" onclick="showPage('home')" class="active">Accueil</button>
        <button id="tab-dashboard" onclick="showPage('dashboard')">Dashboard</button>
        <button id="tab-ventes" onclick="showPage('ventes')">Ventes</button>
        <button id="tab-packs" onclick="showPage('packs')">Packs</button>
        <button id="tab-recettes" onclick="showPage('recettes')">Recettes</button>
        <button id="tab-ingredients" onclick="showPage('ingredients')">Ingr√©dients</button>
        <button id="tab-vendeurs" onclick="showPage('vendeurs')">Vendeurs</button>
        <button id="tab-depenses" onclick="showPage('depenses')">D√©penses</button>
        <button id="tab-historique" onclick="showPage('historique')">Historique</button>
        <button id="tab-tutoriel" onclick="showPage('tutoriel')">Tutoriel</button>
    </div>
</nav>

<!-- ======================= PAGE : ACCUEIL ======================= -->
<section id="page-home" class="page">
    <div class="home-hero card">
        <h1>BusinessFood Manager</h1>
        <p class="home-subtitle">
            G√©rez vos ingr√©dients, recettes, produits finis, ventes et marges
            en quelques clics, que vous fassiez des boissons, des plats cuisin√©s
            ou des p√¢tisseries.
        </p>

        <div class="home-signature">
            Con√ßu par <strong>Takougang Eddy</strong> ‚Äì Fotsi Global Services<br>
            ¬© 2025 ‚Äì BusinessFood Manager
        </div>
    </div>

    <!-- Carte : Configurer l'application -->
    <div class="home-card">
        <h2>Configurer BusinessFood Manager</h2>
        <p>
            Personnalise ton activit√© : type (boissons, plats, p√¢tisseries‚Ä¶),
            nom de ton produit fini (bouteille, assiette, pi√®ce‚Ä¶) et
            une marque ou un nom de produit (ex : Lossi Ananas Menthe Betterave).
        </p>
        <button class="btn btn-success" id="btn-open-config-home">
            ‚öô Configurer l'application
        </button>
    </div>

    <!-- Carte : Commencer une vente -->
    <div class="home-card">
        <h2>Commencer une vente</h2>
        <p>Enregistrer une nouvelle vente de produits finis, avec ou sans pack.</p>
        <button class="btn btn-primary" onclick="showPage('ventes')">
            ‚ûú Aller √† la page Ventes
        </button>
    </div>

    <!-- Carte : G√©rer mes recettes -->
    <div class="home-card">
        <h2>G√©rer mes recettes</h2>
        <p>Cr√©er ou modifier les recettes qui g√©n√®rent vos produits finis.</p>
        <button class="btn btn-pink" onclick="showPage('recettes')">
            ‚ûú Aller √† la page Recettes
        </button>
    </div>

    <!-- Carte : Dashboard -->
    <div class="home-card">
        <h2>Dashboard & R√©sultats</h2>
        <p>Voir le chiffre d‚Äôaffaires, les d√©penses, le b√©n√©fice et la capacit√© restante.</p>
        <button class="btn btn-secondary" onclick="showPage('dashboard')">
            ‚ûú Voir le tableau de bord
        </button>
    </div>

    <!-- Carte : Tutoriel -->
    <div class="home-card">
        <h2>Prendre l‚Äôoutil en main</h2>
        <p>Suivre le tutoriel pas √† pas pour apprendre √† utiliser BusinessFood Manager.</p>
        <button class="btn btn-yellow" onclick="showPage('tutoriel')">
            ‚ûú Ouvrir le tutoriel
        </button>
    </div>
</section>

<!-- ======================= PAGE : CONFIGURATION ======================= -->
<section id="page-config" class="page hidden">
    <div class="card">
        <h1>Configuration initiale</h1>
        <p class="subtitle">
            Indique le type d'activit√© et comment tu appelles ton produit fini.<br>
            Exemple : boisson en bouteille, plat en assiette, p√¢tisserie √† la pi√®ce‚Ä¶
        </p>

        <label>Type d'activit√© :</label>
        <input
            type="text"
            id="cfg-activite"
            placeholder="Ex : Boissons, Plats cuisin√©s, P√¢tisseries, Traiteur‚Ä¶">

        <label>Nom du produit fini (singulier) :</label>
        <input
            type="text"
            id="cfg-produit-s"
            placeholder="Ex : bouteille, assiette, pi√®ce">

        <label>Nom du produit fini (pluriel) :</label>
        <input
            type="text"
            id="cfg-produit-p"
            placeholder="Ex : bouteilles, assiettes, pi√®ces">

        <label>Marque / nom du produit :</label>
        <input
            type="text"
            id="cfg-exemple"
            placeholder="Ex : Lossi Ananas Menthe Betterave, Beignets fourr√©s‚Ä¶">

        <button id="btn-save-config" class="btn btn-primary">
            Enregistrer la configuration
        </button>
    </div>
</section>

<!-- ======================= PAGE : DASHBOARD ======================= -->
<section id="page-dashboard" class="page hidden">
    <div class="dashboard-grid">

        <!-- Produits finis vendus -->
        <div class="dash-card">
            <h3 id="label-dashboard-total">Total produits finis vendus</h3>
            <p id="dash-total-gaufres">0</p>
        </div>

        <!-- Chiffre d‚Äôaffaires -->
        <div class="dash-card">
            <h3>Revenu total</h3>
            <p id="dash-revenu-total">0 FCFA</p>
        </div>

        <!-- D√©penses -->
        <div class="dash-card">
            <h3>D√©penses totales</h3>
            <p id="dash-depenses">0 FCFA</p>
        </div>

        <!-- B√©n√©fice net -->
        <div class="dash-card">
            <h3>B√©n√©fice net</h3>
            <p id="dash-benefice-net">0 FCFA</p>
        </div>

        <!-- Stock de produits finis restants -->
        <div class="dash-card">
            <h3 id="label-dashboard-stock">Stock de produits finis restants</h3>
            <p id="dash-stock-restant">0 produits</p>
        </div>

        <!-- Capacit√© restante -->
        <div class="dash-card">
            <h3 id="label-dashboard-capacite">Capacit√© restante (produits finis possibles)</h3>
            <p id="dash-capacite">0 produits</p>
        </div>

        <!-- Meilleur vendeur -->
        <div class="dash-card big">
            <h3>Meilleur vendeur</h3>
            <p id="dash-best-vendeur">-</p>
        </div>

        <!-- Pack le plus vendu -->
        <div class="dash-card big">
            <h3>Pack le plus vendu</h3>
            <p id="dash-best-pack">-</p>
        </div>

    </div>

    <hr class="separator">

    <h2>Statistiques avanc√©es</h2>

    <div class="dash-advanced">
        <p id="dash-stats-ventes">Analyse ventes : -</p>
        <p id="dash-stats-ingredients">Analyse ingr√©dients : -</p>
    </div>

    <div style="margin-top: 20px; text-align: right;">
        <button class="btn btn-pink" onclick="shareDashboard()">
            üì≤ Partager le tableau de bord
        </button>

        <div class="dash-reset">
            <button class="btn btn-secondary" id="btn-reset-stock">
                üîÑ R√©initialiser le stock de produits finis
            </button>
        </div>
    </div>
</section>

<!-- ======================= PAGE : VENTES ======================= -->
<section id="page-ventes" class="page hidden">
    <div class="card">
        <h1>Nouvelle vente</h1>
        <p class="subtitle">
            Enregistre ici une nouvelle vente. Chaque vente est ind√©pendante et s'ajoute √† l‚Äôhistorique.
        </p>

        <div class="grid-2">
            <div>
                <label>Date</label>
                <input type="date" id="vente-date" />
            </div>

            <div>
                <label>Heure</label>
                <input type="time" id="vente-heure" />
            </div>

            <div>
                <label>Vendeur</label>
                <select id="vente-vendeur"></select>
            </div>

            <div>
                <label>Lieu</label>
                <input type="text" id="vente-lieu" placeholder="March√©, boutique, √©v√©nement‚Ä¶" />
            </div>

            <div class="full-width">
                <label>Packs vendus</label>
                <p class="subtitle small">
                    Les packs list√©s ici viennent de l‚Äôonglet <strong>Packs</strong>.<br>
                    Choisis un pack dans la liste, indique combien tu en as vendu,
                    puis clique sur ¬´ Ajouter ¬ª.
                </p>

                <!-- Ligne de s√©lection du pack -->
                <div class="vente-pack-select-row">
                    <select id="vente-pack-select">
                        <option value="">-- Choisir un pack --</option>
                    </select>

                    <input type="number" id="vente-pack-qte" min="1" value="1" />

                    <button type="button" id="vente-pack-add-btn" class="btn btn-secondary">
                        ‚ûï Ajouter ce pack
                    </button>
                </div>

                <!-- Packs ajout√©s pour cette vente -->
                <div id="vente-packs-choisis" class="vente-packs-choisis">
                    <em>Aucun pack encore ajout√© pour cette vente.</em>
                </div>
            </div>

            <div>
                <label>Unit√©s vendues (hors packs)</label>
                <input type="number" id="vente-unites" min="0" value="0" />
            </div>

            <div>
                <label>Prix unitaire (FCFA)</label>
                <input type="number" id="vente-prix-unite" value="50" min="0" />
            </div>
        </div>

        <button class="btn btn-primary" id="btn-enregistrer-vente">
            ‚ûï Enregistrer la vente
        </button>
    </div>

    <div class="card" id="liste-ventes">
        <h2>Ventes du jour</h2>
        <p class="subtitle">Les ventes ajout√©es apparaissent ici.</p>
        <div id="vente-liste-container"></div>
    </div>
</section>

<!-- ======================= PAGE : PACKS ======================= -->
<section id="page-packs" class="page hidden">
    <div class="container">
        <h2>Packs</h2>
        <p class="subtitle">
            Cr√©e des packs de <strong>produits finis</strong> combinant plusieurs recettes :
            par exemple <em>2 cr√™pes chocolat + 2 cr√™pes miel</em> ou
            <em>10 gaufres + 1 boisson ananas gingembre</em>.
        </p>

        <div class="grid-2">
            <!-- Cr√©ation d'un pack -->
            <div class="card">
                <h3>Cr√©er un nouveau pack</h3>

                <label>Nom du pack :</label>
                <input id="pack-nom" type="text" class="form-control"
                       placeholder="Ex : Formule brunch 10 gaufres + 1 boisson">

                <h4>Contenu du pack</h4>
                <p class="small">
                    Choisis une recette, indique combien de produits finis de cette recette
                    sont inclus dans le pack.
                </p>

                <table class="table">
                    <thead>
                        <tr>
                            <th>Recette</th>
                            <th>Quantit√©</th>
                            <th>Co√ªt ligne</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="pack-items-body">
                        <!-- lignes ajout√©es en JS -->
                    </tbody>
                </table>

                <button id="btn-pack-add-row" type="button" class="btn btn-secondary">
                    + Ajouter une ligne
                </button>

                <p style="margin-top:12px;">
                    <strong>Co√ªt total du pack : </strong>
                    <span id="pack-cost">0 FCFA</span>
                </p>

                <div class="form-row">
                    <div class="form-group">
                        <label>Marge souhait√©e (%) :</label>
                        <input id="pack-margin" type="number" min="0" max="90"
                               value="30" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>Prix de vente du pack (FCFA) :</label>
                        <input id="pack-price" type="number" min="0" class="form-control"
                               placeholder="Laisse vide pour auto-calcul">
                    </div>
                </div>

                <button id="btn-add-pack" type="button" class="btn btn-primary" style="margin-top:12px;">
                    ‚ûú Cr√©er le pack
                </button>

                <p class="small" style="margin-top:8px;">
                    ‚ö†Ô∏è Le logiciel bloque la cr√©ation d‚Äôun pack vendu √† perte
                    (prix de vente &lt; co√ªt total).
                </p>
            </div>

            <!-- Packs existants -->
            <div class="card">
                <h3>Packs existants</h3>
                <div id="packs-list">
                    <!-- rendu JS -->
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ======================= PAGE : RECETTES ======================= -->
<section id="page-recettes" class="page hidden">
    <div class="card">
        <h1>Recettes (sur la base que tu t'es fix√©e niveau pr√©paration)</h1>
        <p class="subtitle">
            D√©clare ici les quantit√©s r√©elles utilis√©es pour pr√©parer ta p√¢te, ta marmite, ta composition...
            Le syst√®me calculera automatiquement le co√ªt total et le co√ªt de revient par produit fini.
        </p>

        <h2>Cr√©er une recette</h2>

        <label>Nom de la recette :</label>
        <input id="rec-nom" type="text" placeholder="Ex : P√¢te vanille">

        <label>Nombre de produits finis obtenus :</label>
        <input id="rec-nb-gaufres" type="number" min="1" placeholder="Ex : 120">

        <label>Prix de vente d‚Äôun produit fini (FCFA) :</label>
        <input id="rec-prix-vente" type="number" min="0" placeholder="Ex : 200">

        <h3>Ingr√©dients utilis√©s dans la recette</h3>

        <div class="recette-add-ing">
            <label>Ingr√©dient :</label>
            <select id="rec-ingredient-select">
                <option value="">-- Choisir un ingr√©dient --</option>
            </select>

            <label>Quantit√© :</label>
            <input id="rec-ingredient-qte" type="number" min="0" placeholder="Ex : 250">

            <label>Unit√© :</label>
            <select id="rec-ingredient-unit">
                <option value="g">g</option>
                <option value="kg">kg</option>
                <option value="ml">ml</option>
                <option value="l">L</option>
                <option value="piece">pi√®ce</option>
            </select>

            <button id="rec-add-ingredient-btn" class="btn btn-secondary" style="margin-top:10px;">
                ‚ûï Ajouter cet ingr√©dient
            </button>
        </div>

        <br>

        <div class="card">
            <h3>Ingr√©dients ajout√©s :</h3>
            <div id="rec-ingredients-list">
                <em>Aucun ingr√©dient ajout√© pour le moment.</em>
            </div>
        </div>

        <br>

        <button id="btn-save-recipe" class="btn btn-primary">
            Enregistrer la recette
        </button>
    </div>

    <hr>

    <div class="card">
        <h2>Recettes enregistr√©es</h2>
        <div id="rec-liste"></div>
    </div>
</section>

<!-- ======================= PAGE : INGR√âDIENTS ======================= -->
<section id="page-ingredients" class="page hidden">
    <h1>Ingr√©dients ‚Äì Stock & Co√ªt</h1>

    <h2>Ajouter un ingr√©dient au stock</h2>

    <label>Nom de l'ingr√©dient :</label>
    <input id="ing-nom" placeholder="Ex : Farine">

    <label>Prix d'achat (FCFA) :</label>
    <input type="number" id="ing-prix" min="0" placeholder="Ex : 900">

    <label>Quantit√© :</label>
    <input type="number" id="ing-qt" min="0" placeholder="Ex : 1000">

    <label>Unit√© du paquet :</label>
    <select id="ing-unit">
        <option value="g">g</option>
        <option value="kg">kg</option>
        <option value="ml">ml</option>
        <option value="l">L</option>
        <option value="piece">pi√®ce</option>
        <option value="sachet">sachet</option>
    </select>

    <label>Seuil d'alerte (m√™me unit√©) :</label>
    <input type="number" id="ing-seuil" min="0" placeholder="Ex : 200">

    <button id="btn-add-ingredient" class="btn btn-primary" style="margin-top: 10px;">
        Ajouter l'ingr√©dient
    </button>

    <h2>Stock actuel</h2>
    <div id="ingredients-list"></div>
</section>

<!-- ======================= PAGE : VENDEURS ======================= -->
<section id="page-vendeurs" class="page hidden">
    <h1>Vendeurs</h1>

    <h2>Ajouter un vendeur</h2>
    <label>Nom :</label>
    <input id="vendeur-nom" placeholder="Pr√©nom">

    <label>Commission (% ou montant fixe) :</label>
    <input id="vendeur-commission" placeholder="Ex : 500 (montant fixe)">

    <button class="btn btn-primary" onclick="addVendeur()">
        Ajouter le Vendeur
    </button>

    <h2>Liste des vendeurs</h2>
    <div id="vendeurs-list"></div>
</section>

<!-- ======================= PAGE : D√âPENSES ======================= -->
<section id="page-depenses" class="page hidden">
    <div class="container">
        <h2>D√©penses</h2>
        <p class="subtitle">
            Enregistre tes d√©penses (ingr√©dients, gaz, transport, salaire‚Ä¶).
            Tu peux choisir la <strong>date r√©elle</strong> de la d√©pense et
            corriger une ligne en cas d‚Äôerreur.
        </p>

        <div class="grid-2">
            <!-- Formulaire -->
            <div class="card">
                <h3>Ajouter / modifier une d√©pense</h3>

                <input type="hidden" id="dep-index" value="-1">

                <label>Date de la d√©pense :</label>
                <input id="dep-date" type="date" class="form-control">

                <label>Cat√©gorie / type de d√©pense :</label>
                <input id="dep-cat" type="text" class="form-control"
                       placeholder="Ex : Gaz, transport, loyer‚Ä¶">

                <label>Montant (FCFA) :</label>
                <input id="dep-montant" type="number" min="0" class="form-control"
                       placeholder="Ex : 2000">

                <label>Note (facultatif) :</label>
                <input id="dep-note" type="text" class="form-control"
                       placeholder="Ex : achat gaz pour la journ√©e">

                <div style="margin-top:12px;">
                    <button id="btn-add-depense" type="button" class="btn btn-primary">
                        Enregistrer la d√©pense
                    </button>
                    <button id="btn-cancel-depense-edit" type="button"
                            class="btn btn-secondary" style="margin-left:8px;">
                        Annuler la modification
                    </button>
                </div>
            </div>

            <!-- Liste -->
            <div class="card">
                <h3>D√©penses enregistr√©es</h3>
                <div id="depenses-list">
                    <!-- rendu JS -->
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ======================= PAGE : HISTORIQUE ======================= -->
<section id="page-historique" class="page hidden">
    <h1>Historique</h1>

    <div id="historique-list"></div>

    <button class="btn btn-yellow" onclick="exportPDF()">Exporter PDF</button>
    <button class="btn btn-primary" onclick="exportCSV()">Exporter CSV</button>
    <button class="btn btn-pink" onclick="shareWhatsapp()">Partager WhatsApp</button>
</section>

<!-- ======================= PAGE : TUTORIEL ======================= -->
<section id="page-tutoriel" class="page hidden">
  <h1>Tutoriel ‚Äì BusinessFood Manager (version actuelle)</h1>

  <p class="tuto-intro">
    Cette version g√®re <strong>plusieurs profils</strong> (configurations compl√®tes), une <strong>devise par profil</strong>,
    des <strong>recettes</strong> (avec option <strong>d√©duire le stock xN</strong>), des <strong>packs modifiables</strong>,
    et des ventes avec contr√¥le de disponibilit√©.<br><br>
    <strong>Important :</strong> au premier d√©marrage, l‚Äôapplication peut afficher un <strong>assistant de d√©marrage</strong>
    et verrouiller certaines rubriques tant que le minimum n‚Äôest pas pr√™t (profil + devise + au moins 1 recette).
    <br><br>
    Flux conseill√© : <strong>Config/Profil ‚Üí Ingr√©dients ‚Üí Recettes (production) ‚Üí Packs ‚Üí Ventes ‚Üí Dashboard/Historique ‚Üí Exports</strong>.
  </p>

  <div class="tuto-grid">

    <!-- 0) Profil -->
    <div class="tuto-step">
      <h3>0) Choisir / cr√©er un profil (configuration compl√®te)</h3>
      <p><strong>Menu : Config</strong></p>
      <ul>
        <li>Un <strong>profil</strong> contient tout : config + ingr√©dients + recettes + packs + ventes + d√©penses.</li>
        <li>Dans <strong>Gestion des donn√©es</strong> :
          <ul>
            <li><strong>Nouveau</strong> : cr√©e un profil vide</li>
            <li><strong>Dupliquer</strong> : copie totale (id√©al pour tester)</li>
            <li><strong>Renommer / Supprimer</strong></li>
          </ul>
        </li>
      </ul>
      <p class="tuto-note">‚ûú L‚Äôapp ne te sort plus de la page Config : tu peux encha√Æner sans aller-retour.</p>
    </div>

    <!-- 1) Devise -->
    <div class="tuto-step">
      <h3>1) Devise & format (par profil)</h3>
      <p><strong>Menu : Config</strong></p>
      <ol>
        <li>Choisis ta <strong>devise</strong> (ex : XAF/FCFA, EUR, USD‚Ä¶).</li>
        <li>Optionnel : masque/affiche la devise √† l‚Äô√©cran (si tu veux juste des chiffres).</li>
        <li>Enregistre : tous les montants (packs, ventes, d√©penses, exports) suivent la devise du profil actif.</li>
      </ol>
      <p class="tuto-note">‚ûú Astuce : 1 profil ‚ÄúDouala (XAF)‚Äù + 1 profil ‚ÄúParis (EUR)‚Äù = aucun m√©lange.</p>
    </div>

    <!-- 2) Ingr√©dients -->
    <div class="tuto-step">
      <h3>2) Ajouter les ingr√©dients au stock</h3>
      <p><strong>Menu : Ingr√©dients</strong></p>
      <ol>
        <li>Renseigne <strong>Nom</strong>, <strong>Prix d‚Äôachat</strong>, <strong>Quantit√©</strong> et <strong>Unit√©</strong>.</li>
        <li>Ajoute un <strong>seuil d‚Äôalerte</strong> si tu veux √™tre pr√©venu des stocks bas.</li>
        <li>Clique <strong>Ajouter l‚Äôingr√©dient</strong>.</li>
      </ol>
    </div>

    <!-- 3) Recettes -->
    <div class="tuto-step">
      <h3>3) Cr√©er une recette (base) + calculer son co√ªt</h3>
      <p><strong>Menu : Recettes</strong></p>
      <ol>
        <li>Donne un <strong>nom</strong> √† la recette.</li>
        <li>Indique le <strong>nombre de produits finis</strong> g√©n√©r√©s (ex : 30 pi√®ces).</li>
        <li>Indique le <strong>prix de vente unitaire</strong> (utile pour la marge et les ventes √† l‚Äôunit√©).</li>
        <li>Ajoute les ingr√©dients (quantit√© + unit√©) puis enregistre.</li>
      </ol>
      <p class="tuto-note">‚ûú Une recette sert aussi de ‚Äúproduit fini‚Äù pour les packs et les ventes.</p>
    </div>

    <!-- 4) Production / d√©duction stock xN -->
    <div class="tuto-step">
      <h3>4) Produire : ‚ÄúD√©duire du stock‚Äù xN</h3>
      <p><strong>Menu : Recettes</strong></p>
      <ul>
        <li>Active <strong>D√©duire du stock</strong> si tu fabriques r√©ellement (consomme les ingr√©dients).</li>
        <li>Choisis <strong>xN</strong> (x1, x2, x3‚Ä¶) = nombre de fourn√©es identiques.</li>
        <li>Si activ√© :
          <ul>
            <li>‚úÖ ingr√©dients d√©duits √óN</li>
            <li>‚úÖ produits finis ajout√©s √óN</li>
          </ul>
        </li>
        <li>Si d√©sactiv√© : la recette est enregistr√©e sans impacter le stock (utile pour pr√©parer/simuler).</li>
      </ul>
    </div>

    <!-- 5) Modifier recette -->
    <div class="tuto-step">
      <h3>5) Modifier une recette</h3>
      <p><strong>Menu : Recettes ‚Üí Recettes enregistr√©es</strong></p>
      <ul>
        <li>Clique <strong>Modifier</strong> sur la recette.</li>
        <li>Tu peux ajuster nom / ingr√©dients / prix / quantit√©s.</li>
        <li>‚ö†Ô∏è Si la recette a d√©j√† servi (packs/ventes), certaines modifications peuvent √™tre limit√©es pour ne pas casser l‚Äôhistorique.</li>
      </ul>
    </div>

    <!-- 6) Packs -->
    <div class="tuto-step">
      <h3>6) Packs : cr√©er, suggestion, modifier</h3>
      <p><strong>Menu : Packs</strong></p>
      <ol>
        <li>Donne un <strong>nom de pack</strong>.</li>
        <li>Ajoute des lignes : <strong>Recette</strong> + <strong>Quantit√©</strong>.</li>
        <li>Le <strong>co√ªt total</strong> se calcule automatiquement.</li>
        <li>Renseigne la <strong>marge souhait√©e (%)</strong> : la <strong>suggestion</strong> se met √† jour en direct (marge sans limite).</li>
        <li>Saisis le prix du pack (ou utilise la suggestion), puis <strong>Cr√©er le pack</strong>.</li>
      </ol>
      <p class="tuto-note">
        ‚úÖ Tu peux <strong>Modifier</strong> un pack existant (recharge le formulaire) puis ‚ÄúMettre √† jour le pack‚Äù.<br>
        ‚ö†Ô∏è Le logiciel bloque la cr√©ation d‚Äôun pack vendu √† perte (<em>prix &lt; co√ªt</em>).
      </p>
    </div>

    <!-- 7) Ventes -->
    <div class="tuto-step">
      <h3>7) Ventes : packs + ventes √† l‚Äôunit√© (par recette)</h3>
      <p><strong>Menu : Ventes</strong></p>
      <ol>
        <li>Renseigne date/heure + vendeur + lieu.</li>
        <li>Ajoute des <strong>packs</strong> (quantit√©). Le stock est contr√¥l√© automatiquement.</li>
        <li>Vente <strong>hors pack</strong> : choisis la <strong>recette</strong> vendue, la quantit√©, et le prix unitaire.</li>
        <li>Enregistre la vente : l‚Äôapp d√©duit le stock des recettes concern√©es.</li>
      </ol>
      <p class="tuto-note">‚ûú Si un pack/produit fini n‚Äôest plus disponible, la vente est bloqu√©e avec une alerte claire.</p>
    </div>

    <!-- 8) D√©penses -->
    <div class="tuto-step">
      <h3>8) D√©penses</h3>
      <p><strong>Menu : D√©penses</strong></p>
      <ol>
        <li>Ajoute une d√©pense : date, cat√©gorie, montant, note.</li>
        <li>Les d√©penses impactent le b√©n√©fice net affich√© sur le Dashboard.</li>
      </ol>
    </div>

    <!-- 9) Historique + exports -->
    <div class="tuto-step">
      <h3>9) Historique & exports (PDF / CSV / WhatsApp)</h3>
      <p><strong>Menu : Historique</strong></p>
      <ul>
        <li><strong>Exporter PDF</strong> : g√©n√®re un PDF √† partager / imprimer.</li>
        <li><strong>Exporter CSV</strong> : parfait pour Excel (analyse, compta).</li>
        <li><strong>Partager WhatsApp</strong> : envoi rapide des r√©sum√©s.</li>
      </ul>
      <p class="tuto-note">‚ûú Bon r√©flexe : exporter r√©guli√®rement (cl√© USB / mail / WhatsApp) pour √©viter les pertes.</p>
    </div>

    <!-- 10) Sauvegarde / export / import -->
    <div class="tuto-step">
      <h3>10) Sauvegarder / Exporter / Importer tes donn√©es</h3>
      <p><strong>Menu : Config ‚Üí Gestion des donn√©es</strong></p>
      <ul>
        <li><strong>Sauvegarder maintenant</strong> : point de contr√¥le manuel (en plus de l‚Äôauto-save).</li>
        <li><strong>Export profil</strong> : t√©l√©charge un fichier JSON du profil actif.</li>
        <li><strong>Import profil</strong> : restaure/cr√©e un profil depuis un JSON.</li>
        <li><strong>Export/Import TOUT</strong> : migration compl√®te (tous les profils) si tu changes d‚Äôappareil.</li>
      </ul>
    </div>

    <!-- 11) Abonnement / mode lecture / mode TEST -->
    <div class="tuto-step">
      <h3>11) Abonnement, gr√¢ce (14 jours) et mode TEST</h3>
      <p><strong>Menu : Config ‚Üí Gestion des donn√©es</strong></p>
      <ul>
        <li><strong>Identifiant appareil (support)</strong> : sert √† l‚Äôactivation et au support.</li>
        <li><strong>Code d‚Äôactivation</strong> : saisis le code fourni, puis clique <strong>Activer</strong>.</li>
        <li>Si l‚Äôabonnement est expir√© : l‚Äôapp passe en <strong>mode lecture</strong> (consultation + exports OK, ajout/modification bloqu√©s).</li>
        <li><strong>Gr√¢ce apr√®s expiration : 14 jours</strong> (si besoin de temps pour renouveler).</li>
        <li><strong>Mode TEST</strong> (d√©veloppement/d√©mo) : disponible uniquement sur les appareils autoris√©s.<br>
            ‚ö†Ô∏è Le mode TEST n‚Äôest pas destin√© √† la production.
        </li>
      </ul>
    </div>

  </div>

  <p class="tuto-outro">
    üí° Routine ‚Äúpro‚Äù : <strong>Produire (d√©duire xN) ‚Üí Packs ‚Üí Ventes ‚Üí D√©penses ‚Üí Historique ‚Üí Export</strong>.
    <br>
    Et pour tester sans risque : <strong>Dupliquer un profil</strong> puis exp√©rimenter.
  </p>
</section>





<!-- ======================= PAGE : MENTIONS L√âGALES ======================= -->
<section id="page-mentions" class="page hidden">
  <div class="card">
    <h1>Mentions l√©gales</h1>

    <h2>Nom commercial</h2>
    <p><strong>BusinessFood Manager</strong></p>

    <h2>√âditeur</h2>
    <p>
      <strong>Fotsi Global Services</strong> / Takougang Eddy<br>
      RCCM : <strong>CM-DLA-01-2025 A-10-01506</strong><br>
      Adresse : <strong>Akwa, Douala</strong><br>
      Contact : <strong>Eddy Takougang</strong><br>
      WhatsApp : <strong>+33 6 29 85 02 14</strong><br>
      Email : <strong>eddy.takougang@gmail.com</strong>
    </p>

    <h2>Support</h2>
    <p>
      Email : <strong>fotsiglobalservices@gmail.com</strong><br>
      WhatsApp : <strong>+237 6 91 83 72 74</strong><br>
      Horaires / d√©lais : <strong>24‚Äì72h ouvr√©es</strong>
    </p>

    <h2>H√©bergement / serveurs</h2>
    <p>
      Par d√©faut, l‚Äôapplication fonctionne <strong>hors ligne</strong> : les donn√©es sont stock√©es <strong>localement</strong>
      sur l‚Äôappareil (stockage navigateur / application). Aucun serveur n‚Äôest requis pour l‚Äôusage standard.
    </p>

    <h2>Propri√©t√© intellectuelle</h2>
    <p>
      L‚Äôapplication, son interface, ses textes et son code sont prot√©g√©s. Toute reproduction, diffusion, revente,
      extraction ou modification non autoris√©e est interdite.
    </p>

    <h2>Version</h2>
    <p>Version : <strong>v6.9.2</strong> ‚Äî Derni√®re mise √† jour : <strong>13/12/2025</strong></p>
  </div>
</section>

<!-- ======================= PAGE : CONFIDENTIALIT√â ======================= -->
<section id="page-confidentialite" class="page hidden">
  <div class="card">
    <h1>Politique de confidentialit√©</h1>

    <h2>Donn√©es trait√©es</h2>
    <p>
      BusinessFood Manager enregistre des donn√©es de gestion : profils, configuration, ingr√©dients, recettes, packs,
      ventes, d√©penses, historiques, et √©ventuellement des informations de vendeur (nom/pseudo), lieu et notes.
    </p>

    <h2>Stockage</h2>
    <p>
      Les donn√©es sont stock√©es <strong>localement sur l‚Äôappareil</strong> (stockage du navigateur / application).
      Par d√©faut, l‚Äôapplication <strong>ne transmet aucune donn√©e</strong> √† un serveur.
    </p>

    <h2>Exports / partages</h2>
    <p>
      Les exports (PDF/CSV/JSON) sont g√©n√©r√©s <strong>√† la demande</strong>. Si vous partagez un export (WhatsApp, email,
      cl√© USB), cela rel√®ve de votre choix.
    </p>

    <h2>Conservation & suppression</h2>
    <p>
      Les donn√©es restent disponibles tant que vous conservez vos profils sur l‚Äôappareil. Vous pouvez supprimer un profil
      (ou remplacer vos donn√©es via import) √† tout moment.
    </p>

    <h2>Bonnes pratiques</h2>
    <ul>
      <li>Prot√©gez l‚Äôappareil (verrouillage / code) et limitez les acc√®s.</li>
      <li>Faites des <strong>exports r√©guliers</strong> (JSON/CSV/PDF) pour sauvegarde.</li>
      <li>En cas de changement d‚Äôappareil, utilisez <strong>Export TOUT</strong> puis <strong>Import TOUT</strong>.</li>
    </ul>

    <p class="small">
      Note : cette page d√©crit le fonctionnement actuel de l‚Äôapp (usage local, sans synchronisation cloud).
    </p>
  </div>
</section>

<!-- ======================= PAGE : CONDITIONS D‚ÄôUTILISATION ======================= -->
<section id="page-cgu" class="page hidden">
  <div class="card">
    <h1>Conditions d‚Äôutilisation (CGU) & Licence</h1>

    <h2>Objet</h2>
    <p>
      BusinessFood Manager est un <strong>outil de gestion</strong> (stock, recettes, packs, ventes, d√©penses, marges,
      exports). Il n‚Äôest pas pr√©sent√© comme un logiciel de caisse certifi√©.
    </p>

    <h2>Licence</h2>
    <ul>
      <li>Licence d‚Äôutilisation <strong>non exclusive</strong>, <strong>non transf√©rable</strong>, li√©e √† un appareil.</li>
      <li>Interdiction de copier, revendre, d√©compiler ou distribuer l‚Äôapplication sans autorisation √©crite.</li>
    </ul>

    <h2>Abonnement & acc√®s</h2>
    <p>
      L‚Äôacc√®s peut √™tre soumis √† un abonnement. En cas d‚Äôexpiration, l‚Äôapplication peut basculer en <strong>mode lecture</strong>
      (consultation + exports possibles ; ajout/modification bloqu√©s). Une <strong>gr√¢ce</strong> peut s‚Äôappliquer apr√®s expiration.
    </p>

    <h2>Mode hors ligne</h2>
    <p>
      L‚Äôapplication fonctionne hors ligne. Certaines fonctions (activation/renouvellement) peuvent n√©cessiter une connexion
      selon la m√©thode de distribution.
    </p>

    <h2>Sauvegarde & responsabilit√©</h2>
    <p>
      Les donn√©es √©tant stock√©es localement, l‚Äôutilisateur est responsable de ses sauvegardes (exports). L‚Äô√©diteur ne peut √™tre tenu
      responsable d‚Äôune perte de donn√©es due √† l‚Äôappareil (panne, vol, suppression navigateur) en l‚Äôabsence de sauvegarde.
    </p>

    <h2>Support</h2>
    <p>
      Support : <strong>fotsiglobalservices@gmail.com</strong> / WhatsApp <strong>+237 6 91 83 72 74</strong> ‚Äî d√©lai : <strong>24‚Äì72h ouvr√©es</strong>.
    </p>

    <h2>Droit applicable</h2>
    <p>
      Sauf disposition contraire, le droit applicable et la juridiction comp√©tente sont ceux du lieu d‚Äô√©tablissement de l‚Äô√©diteur,
      apr√®s tentative de r√©solution amiable.
    </p>
  </div>
</section>


<footer class="app-footer">
    <div style="display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;">
      <div>
        BusinessFood Manager ‚Äì ¬© 2025 Takougang Eddy ‚Ä¢ Fotsi Global Services
        <span class="small" style="opacity:.8;">‚Ä¢ v6.9.2</span>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;">
        <button class="btn btn-secondary" type="button" onclick="showPage('mentions')">Mentions l√©gales</button>
        <button class="btn btn-secondary" type="button" onclick="showPage('confidentialite')">Confidentialit√©</button>
        <button class="btn btn-secondary" type="button" onclick="showPage('cgu')">Conditions</button>
      </div>
    </div>
</footer>

<!-- ======================= SCRIPTS ======================= -->
<script src="app.js"></script>
</body>
</html>
