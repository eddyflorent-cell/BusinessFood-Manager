<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BusinessFood Manager</title>

    <!-- CSS principal -->
    <link rel="stylesheet" href="style.css?v=3">

    <!-- Librairies pour export PDF / capture -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>

<!-- ======================= NAVBAR ======================= -->
<nav class="navbar">
    <div class="app-title">BusinessFood Manager</div>
    <div class="nav-links">
        <button id="tab-home" onclick="showPage('home')" class="active">Accueil</button>
        <button id="tab-dashboard" onclick="showPage('dashboard')">Dashboard</button>
        <button id="tab-ventes" onclick="showPage('ventes')">Ventes</button>
        <button id="tab-packs" onclick="showPage('packs')">Packs</button>
        <button id="tab-recettes" onclick="showPage('recettes')">Recettes</button>
        <button id="tab-ingredients" onclick="showPage('ingredients')">Ingr√©dients</button>
        <button id="tab-vendeurs" onclick="showPage('vendeurs')">Vendeurs</button>
        <button id="tab-depenses" onclick="showPage('depenses')">D√©penses</button>
        <button id="tab-historique" onclick="showPage('historique')">Historique</button>
        <button id="tab-tutoriel" onclick="showPage('tutoriel')">Tutoriel</button>
    </div>
</nav>

<!-- ======================= PAGE : ACCUEIL ======================= -->
<section id="page-home" class="page">
    <div class="home-hero card">
        <h1>BusinessFood Manager</h1>
        <p class="home-subtitle">
            G√©rez vos ingr√©dients, recettes, produits finis, ventes et marges
            en quelques clics, que vous fassiez des boissons, des plats cuisin√©s
            ou des p√¢tisseries.
        </p>

        <div class="home-signature">
            Con√ßu par <strong>Takougang Eddy</strong> ‚Äì Fotsi Global Services<br>
            ¬© 2025 ‚Äì BusinessFood Manager
        </div>
    </div>

    <!-- Carte : Configurer l'application -->
    <div class="home-card">
        <h2>Configurer BusinessFood Manager</h2>
        <p>
            Personnalise ton activit√© : type (boissons, plats, p√¢tisseries‚Ä¶),
            nom de ton produit fini (bouteille, assiette, pi√®ce‚Ä¶) et
            une marque ou un nom de produit (ex : Lossi Ananas Menthe Betterave).
        </p>
        <button class="btn btn-success" id="btn-open-config-home">
            ‚öô Configurer l'application
        </button>
    </div>

    <!-- Carte : Commencer une vente -->
    <div class="home-card">
        <h2>Commencer une vente</h2>
        <p>Enregistrer une nouvelle vente de produits finis, avec ou sans pack.</p>
        <button class="btn btn-primary" onclick="showPage('ventes')">
            ‚ûú Aller √† la page Ventes
        </button>
    </div>

    <!-- Carte : G√©rer mes recettes -->
    <div class="home-card">
        <h2>G√©rer mes recettes</h2>
        <p>Cr√©er ou modifier les recettes qui g√©n√®rent vos produits finis.</p>
        <button class="btn btn-pink" onclick="showPage('recettes')">
            ‚ûú Aller √† la page Recettes
        </button>
    </div>

    <!-- Carte : Dashboard -->
    <div class="home-card">
        <h2>Dashboard & R√©sultats</h2>
        <p>Voir le chiffre d‚Äôaffaires, les d√©penses, le b√©n√©fice et la capacit√© restante.</p>
        <button class="btn btn-secondary" onclick="showPage('dashboard')">
            ‚ûú Voir le tableau de bord
        </button>
    </div>

    <!-- Carte : Tutoriel -->
    <div class="home-card">
        <h2>Prendre l‚Äôoutil en main</h2>
        <p>Suivre le tutoriel pas √† pas pour apprendre √† utiliser BusinessFood Manager.</p>
        <button class="btn btn-yellow" onclick="showPage('tutoriel')">
            ‚ûú Ouvrir le tutoriel
        </button>
    </div>
</section>

<!-- ======================= PAGE : CONFIGURATION ======================= -->
<section id="page-config" class="page hidden">
    <div class="card">
        <h1>Configuration initiale</h1>
        <p class="subtitle">
            Indique le type d'activit√© et comment tu appelles ton produit fini.<br>
            Exemple : boisson en bouteille, plat en assiette, p√¢tisserie √† la pi√®ce‚Ä¶
        </p>

        <label>Type d'activit√© :</label>
        <input
            type="text"
            id="cfg-activite"
            placeholder="Ex : Boissons, Plats cuisin√©s, P√¢tisseries, Traiteur‚Ä¶">

        <label>Nom du produit fini (singulier) :</label>
        <input
            type="text"
            id="cfg-produit-s"
            placeholder="Ex : bouteille, assiette, pi√®ce">

        <label>Nom du produit fini (pluriel) :</label>
        <input
            type="text"
            id="cfg-produit-p"
            placeholder="Ex : bouteilles, assiettes, pi√®ces">

        <label>Marque / nom du produit :</label>
        <input
            type="text"
            id="cfg-exemple"
            placeholder="Ex : Lossi Ananas Menthe Betterave, Beignets fourr√©s‚Ä¶">

        <button id="btn-save-config" class="btn btn-primary">
            Enregistrer la configuration
        </button>
    </div>
</section>

<!-- ======================= PAGE : DASHBOARD ======================= -->
<section id="page-dashboard" class="page hidden">
    <div class="dashboard-grid">

        <!-- Produits finis vendus -->
        <div class="dash-card">
            <h3 id="label-dashboard-total">Total produits finis vendus</h3>
            <p id="dash-total-gaufres">0</p>
        </div>

        <!-- Chiffre d‚Äôaffaires -->
        <div class="dash-card">
            <h3>Revenu total</h3>
            <p id="dash-revenu-total">0 FCFA</p>
        </div>

        <!-- D√©penses -->
        <div class="dash-card">
            <h3>D√©penses totales</h3>
            <p id="dash-depenses">0 FCFA</p>
        </div>

        <!-- B√©n√©fice net -->
        <div class="dash-card">
            <h3>B√©n√©fice net</h3>
            <p id="dash-benefice-net">0 FCFA</p>
        </div>

        <!-- Stock de produits finis restants -->
        <div class="dash-card">
            <h3 id="label-dashboard-stock">Stock de produits finis restants</h3>
            <p id="dash-stock-restant">0 produits</p>
        </div>

        <!-- Capacit√© restante -->
        <div class="dash-card">
            <h3 id="label-dashboard-capacite">Capacit√© restante (produits finis possibles)</h3>
            <p id="dash-capacite">0 produits</p>
        </div>

        <!-- Meilleur vendeur -->
        <div class="dash-card big">
            <h3>Meilleur vendeur</h3>
            <p id="dash-best-vendeur">-</p>
        </div>

        <!-- Pack le plus vendu -->
        <div class="dash-card big">
            <h3>Pack le plus vendu</h3>
            <p id="dash-best-pack">-</p>
        </div>

    </div>

    <hr class="separator">

    <h2>Statistiques avanc√©es</h2>

    <div class="dash-advanced">
        <p id="dash-stats-ventes">Analyse ventes : -</p>
        <p id="dash-stats-ingredients">Analyse ingr√©dients : -</p>
    </div>

    <div style="margin-top: 20px; text-align: right;">
        <button class="btn btn-pink" onclick="shareDashboard()">
            üì≤ Partager le tableau de bord
        </button>

        <div class="dash-reset">
            <button class="btn btn-secondary" id="btn-reset-stock">
                üîÑ R√©initialiser le stock de produits finis
            </button>
        </div>
    </div>
</section>

<!-- ======================= PAGE : VENTES ======================= -->
<section id="page-ventes" class="page hidden">
    <div class="card">
        <h1>Nouvelle vente</h1>
        <p class="subtitle">
            Enregistre ici une nouvelle vente. Chaque vente est ind√©pendante et s'ajoute √† l‚Äôhistorique.
        </p>

        <div class="grid-2">
            <div>
                <label>Date</label>
                <input type="date" id="vente-date" />
            </div>

            <div>
                <label>Heure</label>
                <input type="time" id="vente-heure" />
            </div>

            <div>
                <label>Vendeur</label>
                <select id="vente-vendeur"></select>
            </div>

            <div>
                <label>Lieu</label>
                <input type="text" id="vente-lieu" placeholder="March√©, boutique, √©v√©nement‚Ä¶" />
            </div>

            <div class="full-width">
                <label>Packs vendus</label>
                <p class="subtitle small">
                    Les packs list√©s ici viennent de l‚Äôonglet <strong>Packs</strong>.<br>
                    Choisis un pack dans la liste, indique combien tu en as vendu,
                    puis clique sur ¬´ Ajouter ¬ª.
                </p>

                <!-- Ligne de s√©lection du pack -->
                <div class="vente-pack-select-row">
                    <select id="vente-pack-select">
                        <option value="">-- Choisir un pack --</option>
                    </select>

                    <input type="number" id="vente-pack-qte" min="1" value="1" />

                    <button type="button" id="vente-pack-add-btn" class="btn btn-secondary">
                        ‚ûï Ajouter ce pack
                    </button>
                </div>

                <!-- Packs ajout√©s pour cette vente -->
                <div id="vente-packs-choisis" class="vente-packs-choisis">
                    <em>Aucun pack encore ajout√© pour cette vente.</em>
                </div>
            </div>

            <div>
                <label>Unit√©s vendues (hors packs)</label>
                <input type="number" id="vente-unites" min="0" value="0" />
            </div>

            <div>
                <label>Prix unitaire (FCFA)</label>
                <input type="number" id="vente-prix-unite" value="50" min="0" />
            </div>
        </div>

        <button class="btn btn-primary" id="btn-enregistrer-vente">
            ‚ûï Enregistrer la vente
        </button>
    </div>

    <div class="card" id="liste-ventes">
        <h2>Ventes du jour</h2>
        <p class="subtitle">Les ventes ajout√©es apparaissent ici.</p>
        <div id="vente-liste-container"></div>
    </div>
</section>

<!-- ======================= PAGE : PACKS ======================= -->
<section id="page-packs" class="page hidden">
    <div class="container">
        <h2>Packs</h2>
        <p class="subtitle">
            Cr√©e des packs de <strong>produits finis</strong> combinant plusieurs recettes :
            par exemple <em>2 cr√™pes chocolat + 2 cr√™pes miel</em> ou
            <em>10 gaufres + 1 boisson ananas gingembre</em>.
        </p>

        <div class="grid-2">
            <!-- Cr√©ation d'un pack -->
            <div class="card">
                <h3>Cr√©er un nouveau pack</h3>

                <label>Nom du pack :</label>
                <input id="pack-nom" type="text" class="form-control"
                       placeholder="Ex : Formule brunch 10 gaufres + 1 boisson">

                <h4>Contenu du pack</h4>
                <p class="small">
                    Choisis une recette, indique combien de produits finis de cette recette
                    sont inclus dans le pack.
                </p>

                <table class="table">
                    <thead>
                        <tr>
                            <th>Recette</th>
                            <th>Quantit√©</th>
                            <th>Co√ªt ligne</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="pack-items-body">
                        <!-- lignes ajout√©es en JS -->
                    </tbody>
                </table>

                <button id="btn-pack-add-row" type="button" class="btn btn-secondary">
                    + Ajouter une ligne
                </button>

                <p style="margin-top:12px;">
                    <strong>Co√ªt total du pack : </strong>
                    <span id="pack-cost">0 FCFA</span>
                </p>

                <div class="form-row">
                    <div class="form-group">
                        <label>Marge souhait√©e (%) :</label>
                        <input id="pack-margin" type="number" min="0" max="90"
                               value="30" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>Prix de vente du pack (FCFA) :</label>
                        <input id="pack-price" type="number" min="0" class="form-control"
                               placeholder="Laisse vide pour auto-calcul">
                    </div>
                </div>

                <button id="btn-add-pack" type="button" class="btn btn-primary" style="margin-top:12px;">
                    ‚ûú Cr√©er le pack
                </button>

                <p class="small" style="margin-top:8px;">
                    ‚ö†Ô∏è Le logiciel bloque la cr√©ation d‚Äôun pack vendu √† perte
                    (prix de vente &lt; co√ªt total).
                </p>
            </div>

            <!-- Packs existants -->
            <div class="card">
                <h3>Packs existants</h3>
                <div id="packs-list">
                    <!-- rendu JS -->
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ======================= PAGE : RECETTES ======================= -->
<section id="page-recettes" class="page hidden">
    <div class="card">
        <h1>Recettes (sur la base que tu t'es fix√©e niveau pr√©paration)</h1>
        <p class="subtitle">
            D√©clare ici les quantit√©s r√©elles utilis√©es pour pr√©parer ta p√¢te, ta marmite, ta composition...
            Le syst√®me calculera automatiquement le co√ªt total et le co√ªt de revient par produit fini.
        </p>

        <h2>Cr√©er une recette</h2>

        <label>Nom de la recette :</label>
        <input id="rec-nom" type="text" placeholder="Ex : P√¢te vanille">

        <label>Nombre de produits finis obtenus :</label>
        <input id="rec-nb-gaufres" type="number" min="1" placeholder="Ex : 120">

        <label>Prix de vente d‚Äôun produit fini (FCFA) :</label>
        <input id="rec-prix-vente" type="number" min="0" placeholder="Ex : 200">

        <h3>Ingr√©dients utilis√©s dans la recette</h3>

        <div class="recette-add-ing">
            <label>Ingr√©dient :</label>
            <select id="rec-ingredient-select">
                <option value="">-- Choisir un ingr√©dient --</option>
            </select>

            <label>Quantit√© :</label>
            <input id="rec-ingredient-qte" type="number" min="0" placeholder="Ex : 250">

            <label>Unit√© :</label>
            <select id="rec-ingredient-unit">
                <option value="g">g</option>
                <option value="kg">kg</option>
                <option value="ml">ml</option>
                <option value="l">L</option>
                <option value="piece">pi√®ce</option>
            </select>

            <button id="rec-add-ingredient-btn" class="btn btn-secondary" style="margin-top:10px;">
                ‚ûï Ajouter cet ingr√©dient
            </button>
        </div>

        <br>

        <div class="card">
            <h3>Ingr√©dients ajout√©s :</h3>
            <div id="rec-ingredients-list">
                <em>Aucun ingr√©dient ajout√© pour le moment.</em>
            </div>
        </div>

        <br>

        <button id="btn-save-recipe" class="btn btn-primary">
            Enregistrer la recette
        </button>
    </div>

    <hr>

    <div class="card">
        <h2>Recettes enregistr√©es</h2>
        <div id="rec-liste"></div>
    </div>
</section>

<!-- ======================= PAGE : INGR√âDIENTS ======================= -->
<section id="page-ingredients" class="page hidden">
    <h1>Ingr√©dients ‚Äì Stock & Co√ªt</h1>

    <h2>Ajouter un ingr√©dient au stock</h2>

    <label>Nom de l'ingr√©dient :</label>
    <input id="ing-nom" placeholder="Ex : Farine">

    <label>Prix d'achat (FCFA) :</label>
    <input type="number" id="ing-prix" min="0" placeholder="Ex : 900">

    <label>Quantit√© :</label>
    <input type="number" id="ing-qt" min="0" placeholder="Ex : 1000">

    <label>Unit√© du paquet :</label>
    <select id="ing-unit">
        <option value="g">g</option>
        <option value="kg">kg</option>
        <option value="ml">ml</option>
        <option value="l">L</option>
        <option value="piece">pi√®ce</option>
        <option value="sachet">sachet</option>
    </select>

    <label>Seuil d'alerte (m√™me unit√©) :</label>
    <input type="number" id="ing-seuil" min="0" placeholder="Ex : 200">

    <button id="btn-add-ingredient" class="btn btn-primary" style="margin-top: 10px;">
        Ajouter l'ingr√©dient
    </button>

    <h2>Stock actuel</h2>
    <div id="ingredients-list"></div>
</section>

<!-- ======================= PAGE : VENDEURS ======================= -->
<section id="page-vendeurs" class="page hidden">
    <h1>Vendeurs</h1>

    <h2>Ajouter un vendeur</h2>
    <label>Nom :</label>
    <input id="vendeur-nom" placeholder="Pr√©nom">

    <label>Commission (% ou montant fixe) :</label>
    <input id="vendeur-commission" placeholder="Ex : 500 (montant fixe)">

    <button class="btn btn-primary" onclick="addVendeur()">
        Ajouter le Vendeur
    </button>

    <h2>Liste des vendeurs</h2>
    <div id="vendeurs-list"></div>
</section>

<!-- ======================= PAGE : D√âPENSES ======================= -->
<section id="page-depenses" class="page hidden">
    <div class="container">
        <h2>D√©penses</h2>
        <p class="subtitle">
            Enregistre tes d√©penses (ingr√©dients, gaz, transport, salaire‚Ä¶).
            Tu peux choisir la <strong>date r√©elle</strong> de la d√©pense et
            corriger une ligne en cas d‚Äôerreur.
        </p>

        <div class="grid-2">
            <!-- Formulaire -->
            <div class="card">
                <h3>Ajouter / modifier une d√©pense</h3>

                <input type="hidden" id="dep-index" value="-1">

                <label>Date de la d√©pense :</label>
                <input id="dep-date" type="date" class="form-control">

                <label>Cat√©gorie / type de d√©pense :</label>
                <input id="dep-cat" type="text" class="form-control"
                       placeholder="Ex : Gaz, transport, loyer‚Ä¶">

                <label>Montant (FCFA) :</label>
                <input id="dep-montant" type="number" min="0" class="form-control"
                       placeholder="Ex : 2000">

                <label>Note (facultatif) :</label>
                <input id="dep-note" type="text" class="form-control"
                       placeholder="Ex : achat gaz pour la journ√©e">

                <div style="margin-top:12px;">
                    <button id="btn-add-depense" type="button" class="btn btn-primary">
                        Enregistrer la d√©pense
                    </button>
                    <button id="btn-cancel-depense-edit" type="button"
                            class="btn btn-secondary" style="margin-left:8px;">
                        Annuler la modification
                    </button>
                </div>
            </div>

            <!-- Liste -->
            <div class="card">
                <h3>D√©penses enregistr√©es</h3>
                <div id="depenses-list">
                    <!-- rendu JS -->
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ======================= PAGE : HISTORIQUE ======================= -->
<section id="page-historique" class="page hidden">
    <h1>Historique</h1>

    <div id="historique-list"></div>

    <button class="btn btn-yellow" onclick="exportPDF()">Exporter PDF</button>
    <button class="btn btn-primary" onclick="exportCSV()">Exporter CSV</button>
    <button class="btn btn-pink" onclick="shareWhatsapp()">Partager WhatsApp</button>
</section>

<!-- ======================= PAGE : TUTORIEL ======================= -->
<section id="page-tutoriel" class="page hidden">
  <h1>Tutoriel ‚Äì BusinessFood Manager (version compl√®te)</h1>

  <p class="tuto-intro">
    Ce guide te montre le flux r√©el, celui qui marche au quotidien :
    <strong>Configurer ‚Üí Ingr√©dients ‚Üí Recettes/Production ‚Üí Packs ‚Üí Ventes ‚Üí Dashboard/Historique ‚Üí Exports & Sauvegardes</strong>.
    <br><br>
    ‚ö†Ô∏è Important : dans cette app, une ‚Äúrecette‚Äù sert √† <strong>produire</strong> des <strong>produits finis</strong>.
    Et si tu coches <strong>‚ÄúD√©duire du stock xN‚Äù</strong>, tu consommes aussi tes ingr√©dients (comme dans la V1).
  </p>

  <div class="tuto-grid">

    <!-- √âtape 0 : Profils / Configurations -->
    <div class="tuto-step">
      <h3>0) Profils / Configurations (tr√®s important)</h3>
      <p><strong>Onglet : Config</strong></p>
      <ul>
        <li>Tu peux travailler avec <strong>plusieurs configurations</strong> (ex : ‚ÄúBoutique A‚Äù, ‚ÄúBoutique B‚Äù, ‚ÄúJanvier‚Äù, ‚ÄúF√©vrier‚Äù, ‚ÄúTest‚Äù, etc.).</li>
        <li>Dans la page Config, une carte ‚Äú<strong>Gestion des profils & donn√©es</strong>‚Äù te permet de :
          <ul>
            <li><strong>Cr√©er</strong> un profil</li>
            <li><strong>Dupliquer</strong> (copie compl√®te : ingr√©dients, recettes, stock, ventes‚Ä¶)</li>
            <li><strong>Exporter / Importer</strong> un profil</li>
            <li><strong>Exporter / Importer TOUT</strong> (tous les profils)</li>
          </ul>
        </li>
      </ul>
      <p class="tuto-note">
        ‚ûú Conseil : 1 profil = 1 activit√© / 1 point de vente / 1 p√©riode. Comme √ßa tu ne m√©langes pas tes chiffres.
      </p>
    </div>

    <!-- √âtape 1 : Configuration -->
    <div class="tuto-step">
      <h3>1) Configurer l‚Äôapplication</h3>
      <p><strong>Onglet : Accueil ‚Üí ‚ÄúConfigurer l‚Äôapplication‚Äù ou menu Config</strong></p>
      <ol>
        <li>Renseigne le <strong>type d‚Äôactivit√©</strong> (boissons, plats, p√¢tisseries‚Ä¶).</li>
        <li>D√©finis le nom de ton produit fini :
          <ul>
            <li><strong>Singulier</strong> (ex : bouteille, assiette, pi√®ce)</li>
            <li><strong>Pluriel</strong> (ex : bouteilles, assiettes, pi√®ces)</li>
          </ul>
        </li>
        <li>Optionnel : ‚ÄúMarque / nom du produit‚Äù (ex : ‚ÄúLossi ‚Ä¶‚Äù).</li>
        <li>Clique <strong>‚ÄúEnregistrer la configuration‚Äù</strong>.</li>
      </ol>
    </div>

    <!-- √âtape 2 : Ingr√©dients -->
    <div class="tuto-step">
      <h3>2) Ajouter les ingr√©dients au stock</h3>
      <p><strong>Onglet : Ingr√©dients</strong></p>
      <ol>
        <li>Remplis : <strong>Nom</strong> + <strong>Prix d‚Äôachat</strong> + <strong>Quantit√©</strong> + <strong>Unit√©</strong>.</li>
        <li>Optionnel : <strong>Seuil d‚Äôalerte</strong> (m√™me unit√©) ‚Üí pratique pour voir les stocks bas.</li>
        <li>Clique <strong>‚ÄúAjouter l‚Äôingr√©dient‚Äù</strong>.</li>
      </ol>
      <p class="tuto-note">
        ‚ûú Si tu te trompes : utilise <strong>Modifier</strong> / <strong>Supprimer</strong> sur la fiche ingr√©dient.
      </p>
    </div>

    <!-- √âtape 3 : Recette -->
    <div class="tuto-step">
      <h3>3) Cr√©er une recette (et calculer le co√ªt)</h3>
      <p><strong>Onglet : Recettes</strong></p>
      <ol>
        <li>Renseigne :
          <ul>
            <li><strong>Nom</strong> de la recette</li>
            <li><strong>Nombre de produits finis obtenus</strong> (ex : 120)</li>
            <li><strong>Prix de vente d‚Äôun produit fini</strong> (ex : 200 FCFA)</li>
          </ul>
        </li>
        <li>Ajoute les ingr√©dients 1 par 1 :
          <ul>
            <li>Choisis un ingr√©dient</li>
            <li>Quantit√© + unit√©</li>
            <li>Clique <strong>‚ÄúAjouter cet ingr√©dient‚Äù</strong></li>
          </ul>
        </li>
        <li>Tu vois la liste ‚ÄúIngr√©dients ajout√©s‚Äù avec le co√ªt calcul√©.</li>
        <li>Clique <strong>‚ÄúEnregistrer la recette‚Äù</strong>.</li>
      </ol>
      <p class="tuto-note">
        ‚úÖ Tu peux <strong>Modifier</strong> une recette depuis ‚ÄúRecettes enregistr√©es‚Äù.<br>
        ‚ö†Ô∏è Si cette recette a d√©j√† servi √† des ventes/stock, certaines modifications peuvent √™tre limit√©es pour ne pas fausser l‚Äôhistorique.
      </p>
    </div>

    <!-- √âtape 4 : Production / D√©duire stock xN -->
    <div class="tuto-step">
      <h3>4) Produire (D√©duire du stock xN)</h3>
      <p><strong>Onglet : Recettes</strong></p>
      <ul>
        <li>Quand tu es pr√™t √† fabriquer ‚Äúen vrai‚Äù, utilise l‚Äôoption :
          <strong>D√©duire du stock</strong> + multiplicateur <strong>x1 / x2 / x3‚Ä¶</strong></li>
        <li><strong>xN</strong> signifie : ‚Äúje fais N fourn√©es identiques‚Äù.</li>
        <li>Si c‚Äôest coch√© :
          <ul>
            <li>‚úÖ les ingr√©dients sont <strong>d√©duits</strong> du stock (quantit√©s √ó N)</li>
            <li>‚úÖ tes <strong>produits finis</strong> augmentent (produits √ó N)</li>
          </ul>
        </li>
        <li>Si c‚Äôest d√©coch√© : tu enregistres la recette mais <strong>sans impacter</strong> les ingr√©dients (utile pour simuler / pr√©parer).</li>
      </ul>
      <p class="tuto-note">
        ‚ûú C‚Äôest exactement l‚Äôesprit ‚ÄúV1 : d√©duire du stock x1‚Äù, mais en plus propre (avec xN).
      </p>
    </div>

    <!-- √âtape 5 : Packs -->
    <div class="tuto-step">
      <h3>5) Cr√©er des packs (avec marge + suggestion)</h3>
      <p><strong>Onglet : Packs</strong></p>
      <ol>
        <li>Donne un <strong>nom de pack</strong> (ex : ‚ÄúFormule brunch‚Äù).</li>
        <li>Ajoute une ou plusieurs lignes :
          <ul>
            <li><strong>Recette</strong> (produit fini)</li>
            <li><strong>Quantit√©</strong> incluse dans le pack</li>
          </ul>
        </li>
        <li>Le syst√®me calcule le <strong>co√ªt total du pack</strong>.</li>
        <li>Tu mets ta <strong>marge souhait√©e (%)</strong> ‚Üí la <strong>Suggestion</strong> de prix se met √† jour.</li>
        <li>Tu peux laisser le prix vide pour auto-calcul, ou saisir ton prix.</li>
        <li>Clique <strong>‚ÄúCr√©er le pack‚Äù</strong>.</li>
      </ol>
      <p class="tuto-note">
        ‚ö†Ô∏è Les packs sont li√©s au <strong>stock r√©el</strong> : si les produits finis d‚Äôune recette ne sont plus dispo,
        le syst√®me t‚Äôalerte / bloque pour √©viter de vendre du stock inexistant.
      </p>
    </div>

    <!-- √âtape 6 : Ventes -->
    <div class="tuto-step">
      <h3>6) Enregistrer une vente (packs + unit√©s)</h3>
      <p><strong>Onglet : Ventes</strong></p>
      <ol>
        <li>Renseigne <strong>Date</strong>, <strong>Heure</strong>, <strong>Vendeur</strong>, <strong>Lieu</strong>.</li>
        <li>Ajoute des packs :
          <ul>
            <li>Choisis un pack</li>
            <li>Quantit√© vendue</li>
            <li>Clique <strong>‚ÄúAjouter ce pack‚Äù</strong></li>
          </ul>
        </li>
        <li>Optionnel : vente √† l‚Äôunit√© <strong>hors packs</strong> (Unit√©s vendues + prix unitaire).</li>
        <li>Clique <strong>‚ÄúEnregistrer la vente‚Äù</strong>.</li>
      </ol>
      <p class="tuto-note">
        ‚úÖ La vente appara√Æt dans ‚ÄúVentes du jour‚Äù et dans l‚Äô<strong>Historique</strong>.<br>
        ‚ö†Ô∏è Si un pack est indisponible (stock insuffisant), la vente est bloqu√©e avec un message clair.
      </p>
    </div>

    <!-- √âtape 7 : D√©penses -->
    <div class="tuto-step">
      <h3>7) Enregistrer les d√©penses</h3>
      <p><strong>Onglet : D√©penses</strong></p>
      <ol>
        <li>Choisis la <strong>date r√©elle</strong>, une <strong>cat√©gorie</strong> (gaz, transport, salaire‚Ä¶), le <strong>montant</strong>.</li>
        <li>Clique <strong>‚ÄúEnregistrer la d√©pense‚Äù</strong>.</li>
        <li>Tu peux <strong>modifier</strong> ou <strong>supprimer</strong> une d√©pense.</li>
      </ol>
    </div>

    <!-- √âtape 8 : Dashboard + Historique + Exports -->
    <div class="tuto-step">
      <h3>8) Lire tes r√©sultats + exporter</h3>
      <p><strong>Onglets : Dashboard & Historique</strong></p>
      <ul>
        <li><strong>Dashboard</strong> : revenu total, d√©penses, b√©n√©fice net, stock restant, capacit√©, meilleur vendeur, meilleur pack.</li>
        <li><strong>Historique</strong> : tout est list√©, et tu peux :
          <ul>
            <li><strong>Exporter PDF</strong></li>
            <li><strong>Exporter CSV</strong></li>
            <li><strong>Partager WhatsApp</strong></li>
          </ul>
        </li>
      </ul>
      <p class="tuto-note">
        ‚ûú R√©flexe pro : exporte r√©guli√®rement (CSV/PDF) pour sauvegarder hors du t√©l√©phone/PC.
      </p>
    </div>

    <!-- √âtape 9 : Sauvegarde / Import / Export (rappel) -->
    <div class="tuto-step">
      <h3>9) Sauvegardes & transferts (cl√© USB / nouveau t√©l√©phone)</h3>
      <p><strong>Onglet : Config</strong></p>
      <ul>
        <li>L‚Äôapp enregistre automatiquement les donn√©es dans le navigateur (localStorage).</li>
        <li>Pour s√©curiser et transf√©rer :
          <ul>
            <li><strong>Exporter le profil actif</strong> (JSON)</li>
            <li><strong>Importer un profil</strong> (JSON) sur un autre appareil</li>
            <li><strong>Exporter / Importer TOUT</strong> si tu veux tout migrer d‚Äôun coup</li>
          </ul>
        </li>
      </ul>
      <p class="tuto-note">
        ‚ûú Si tu changes de t√©l√©phone/navigateur, l‚Äôimport JSON te remet tout : ingr√©dients, recettes, packs, ventes, d√©penses, etc.
      </p>
    </div>

  </div>

  <p class="tuto-outro">
    üí° Routine simple : <strong>Produire (Recettes + D√©duire xN) ‚Üí Vendre ‚Üí D√©penses ‚Üí Export</strong>.<br>
    Et tu gardes une trace claire avec l‚ÄôHistorique + les profils.
  </p>
</section>


<footer class="app-footer">
    BusinessFood Manager ‚Äì ¬© 2025 Takougang Eddy ‚Ä¢ Fotsi Global Services
</footer>

<!-- ======================= SCRIPTS ======================= -->
<script src="app.js"></script>
</body>
</html>
